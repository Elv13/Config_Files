
#***************************************************************************#
#                                                                           #
#                                                                           #
#                             GCC OPTIMISATION                              #
#                                                                           #
#                                                                           #
#***************************************************************************#

ARCH="core-avx2"
#ARCH="amd64"

COREFLAGS="    -pipe \
               -freorder-blocks
               -ftree-loop-im
               -finline-functions
               -ftree-loop-distribution
               -fno-stack-protector
               -fgcse-after-reload
               -mfpmath=sse
               -funswitch-loops
               -fomit-frame-pointer
               -fivopts
               -msahf"

GOMP_FLAGS="   -ftree-parallelize-loops=4
               -floop-parallelize-all
               -fopenmp
               -floop-interchange 
               -floop-strip-mine
               -floop-block"

GRAPHITE_FLAGS="
               -fgraphite-identity"

LTO_FLAGS="
               -flto"

CPUFLAGS="  -msse
            -msse2
            -msse3
            -mmmx
            -mavx
            -mavx2
            -mno-3dnow"


CFLAGS="-pipe -march=${ARCH} -O2"
#CFLAGS="-pipe -march=${ARCH} -O3 ${CPUFLAGS} -mtune=core-avx2"# ${COREFLAGS}"
#CFLAGS="-Os -march=${ARCH} -mtune=core-avx2 ${CPUFLAGS} ${COREFLAGS}"

CXXFLAGS="${CFLAGS}"



#LDFLAGS="-Wl,--hash-style=gnu,--as-needed,-O1,-O1 -fuse-linker-plugin"
#LDFLAGS="-Wl,--hash-style=gnu,--as-needed,-O1,-O1 -fopenmp -lgomp -fuse-linker-plugin"

#BEST
#LDFLAGS="-Wl,--hash-style=gnu,--as-needed,-O1,-O1 -fopenmp -lgomp -fuse-linker-plugin -flto"

CHOST="x86_64-pc-linux-gnu"

#***************************************************************************#
#                                                                           #
#                                                                           #
#                               STABILITY                                   #
#                                                                           #
#                                                                           #
#***************************************************************************#

ACCEPT_KEYWORDS="~amd64"

#***************************************************************************#
#                                                                           #
#                                                                           #
#                          NICENESS AND FEATURES                            #
#                                                                           #
#                                                                           #
#***************************************************************************#


MAKEOPTS="-j8"

#FEATURES="${FEATURES} metadata-transfer"

#ACCEPT_LICENSE="dlj-1.1 skype-eula googleearth AdobeFlash-10.1 google-chrome\
# NVIDIA-CUDA Broadcom"

#***************************************************************************#
#                                                                           #
#                                                                           #
#                                  USE flags                                #
#                                                                           #
#                                                                           #
#***************************************************************************#

HARDWARE_USE=" mmx mmxext sse sse2 sse3 -3dnow smp dvd cd-r xv cdda vcd cdio aiglx dc1394 acpi apm dv -ieee1394
               -dv1394 -video1394 -directfb cddb opengl dri drm alsa usb optimisememory openal -jack -arts
               dvdread dvb v4l scanner -xine lirc xcomposite ipod iphone logitech-mouse -hal dvdr lm_sensors
               v4l2 vdpau gpu cuda nptl opencl cuda threads thread lto sse4 ssse3 udev udisks
               nvidia vaapi avx g3dvl networkmanager -ieee1394"

PRINT_USE="    -hplip -foomatic -gimpprint -cups -foomaticdb"

AUDIO_USE="    aaa a52 ogg flac theora oggvorbis mp3 aac icecast m4a mp4 webm vc8"

VIDEO_USE="    vorbis matroska m4p m4v dts ffmpeg mpeg mplayer win32codecs divx wmp quicktime real stream
               live radio wmf avi xvid dvdnav mp2 realmedia encode x264 h264 faad  stream vlc"

IMAGE_USE="    svga svg jpeg png gif exif xpm geolocation"

DEV_USE="      css c cpp html cg -doc -double-precision -examples freeimage threads server blender-game
               povray sqlite3 sqlite webdav-neon -debug openmp  sqlite libnotify c++0x c++11 cxx git
               -vala"

NLS_USE="      -nls -fr -accessibility -doc -docbook"

COMP_USE="     rar bzip2 7Zip szip 7z lzma"

FS_USE="       fat hfs ntfs btrfs"

INTERNET_USE=" samba -mysql -httpd irc -java -flash ftp mdnsresponder-compat nsplugin
               xulrunner -ipv6 avahi zeroconf mdns"

LIBS_USE="     qt4 -qt3 X -gtk -wxwindows pam pam-console spell dbus -dcop freetype bidi gnutls truetype
               aalib -gstreamer sdl -esd oss kde -gnome qt3support libnotify lua xcb -perl 
		-accessibility -exceptions -glib -acl"

AUTRE_USE="    unicode hashstyle mad vlm pdf xscreensaver glitz skins pnm kdeenablefinal
               openexr bash-completion -abiword"

GRAPHITE_USES="graphite"

USE=" ${HARDWARE_USE}
      ${AUDIO_USE}
      ${VIDEO_USE}
      ${IMAGE_USE}
      ${PRINT_USE}
      ${DEV_USE}
      ${NLS_USE}
      ${COMP_USE}
      ${FS_USE}
      ${GRAPHITE_USE}
      ${INTERNET_USE}
      ${LIBS_USE}
      ${AUTRE_USE}"
#USE=""


#***************************************************************************#
#                                                                           #
#                                                                           #
#                      HARDWARE AND NATIVE VARIABLES                        #
#                                                                           #
#                                                                           #
#***************************************************************************#

#LINGUAS="fr fr_CA"

VIDEO_CARDS="nvidia intel"

#ALSA_CARDS="hda-intel"

#INPUT_DEVICES="keyboard mouse evdev touchpad"

#LIRC_DEVICES="serial appleir"

#SANE_BACKENDS="hp hp3500 hp3900 hp4200 hp5400 hp5590 hpljm1005 hpsj5s"

#ALSA_PCM_PLUGINS=""

GRUB_PLATFORMS="efi-64"

#***************************************************************************#
#                                                                           #
#                                                                           #
#                             OTHER OPTIONS                                 #
#                                                                           #
#                                                                           #
#***************************************************************************#

#SYNC="rsync://rsync.gentoo.org/gentoo-portage"

#GENTOO_MIRRORS=""

#EMERGE_DEFAULT_OPTS="--verbose"

CLEAN_DELAY="5"

#PYTHON_TARGETS="python2_7 python3_3 pypy2_0"

#***************************************************************************#
#                                                                           #
#                                                                           #
#                                 OVERLAYS                                  #
#                                                                           #
#                                                                           #
#***************************************************************************#

#source /usr/portage/local/layman/make.conf

